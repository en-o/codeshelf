# CodeShelf 软件需求文档

## 一、项目立意

### 1.1 项目背景

随着开发者参与的项目日益增多，本地存储着大量的代码仓库。这些项目分散在不同目录，使用不同的远程托管平台（GitHub、Gitee、GitLab），管理和维护变得愈发困难。开发者常常面临以下困境：

- 找不到某个项目在哪里
- 忘记哪些项目有未提交或未推送的代码
- 需要频繁在文件管理器、终端、编辑器之间切换
- 难以直观了解自己的编码活动和贡献情况

### 1.2 产品定位

**CodeShelf（代码书架）** 是一款面向开发者的本地项目管理工具，旨在为开发者提供一个统一、高效、直观的项目管理平台。如同书架整理书籍一般，CodeShelf 帮助开发者整理、管理和快速访问本地的所有代码项目。

### 1.3 目标用户

- 拥有多个本地代码项目的个人开发者
- 需要同时管理多个仓库的全栈开发者
- 希望提升项目管理效率的技术团队成员

### 1.4 产品价值主张

| 价值维度 | 描述 |
|----------|------|
| 效率提升 | 减少项目查找和切换时间，一键直达目标 |
| 状态可见 | Git 状态实时可见，避免遗漏未提交代码 |
| 统一管理 | 多远程仓库统一管理，简化同步流程 |
| 数据洞察 | 可视化编码活动，建立正向反馈循环 |

---

## 二、功能说明

### 2.1 项目书架

项目书架是 CodeShelf 的核心功能模块，提供项目的集中展示和管理。

| 功能 | 说明 |
|------|------|
| 智能展示 | 支持网格/列表双视图切换，自动识别项目远程源（GitHub/Gitee/GitLab/本地） |
| 快速搜索 | 实时搜索项目名称和路径，快速定位目标项目 |
| 批量管理 | 扫描指定目录批量发现并添加项目，支持选择性导入 |
| 收藏置顶 | 重要项目一键收藏，自动置顶显示，方便快速访问 |
| 分类标签 | 支持项目分类和标签管理，便于组织和筛选 |
| 详情查看 | 点击查看项目详细信息、Git 状态、提交历史 |

### 2.2 Git 集成

深度集成 Git 版本控制功能，无需离开应用即可完成常用 Git 操作。

| 功能 | 说明 |
|------|------|
| 状态监控 | 实时显示分支名称、修改状态、远程差异（ahead/behind） |
| 提交管理 | 可视化选择文件、编写提交信息、一键提交推送 |
| 分支操作 | 切换分支、创建新分支 |
| 远程仓库 | 管理多个远程仓库，支持切换当前远程、添加/删除远程、同步到其他远程 |
| 拉取推送 | 一键拉取/推送代码到当前选中的远程仓库 |

### 2.3 数据统计

提供 GitHub 风格的编码活动统计和可视化。

| 功能 | 说明 |
|------|------|
| 实时统计 | 总项目数、今日提交、本周提交、待推送数量 |
| 提交热力图 | 365 天提交活动可视化，直观展示编码习惯 |
| 自动聚合 | 从所有本地项目自动收集和聚合统计数据 |

### 2.4 快捷操作

一键式快捷操作，减少上下文切换，提升开发效率。

| 功能 | 说明 |
|------|------|
| 编辑器打开 | 一键在配置的编辑器中打开项目（支持 VSCode、IDEA 等） |
| 终端集成 | 快速在项目目录打开终端（支持系统终端、PowerShell、Windows Terminal 等） |
| 文件夹打开 | 在系统文件管理器中打开项目目录 |

### 2.5 个性化设置

| 功能 | 说明 |
|------|------|
| 主题切换 | 浅色/深色主题自由切换，平滑过渡动画 |
| 编辑器配置 | 支持配置多个编辑器，设置默认编辑器 |
| 终端配置 | 支持配置终端类型和路径 |
| 自动更新 | 支持检查更新、下载安装新版本 |

---

## 三、用户故事与使用场景

### 3.1 用户故事

#### US-001: 快速找到项目
> 作为一名开发者，我希望能够快速找到我想要的项目，以便节省查找时间并立即开始工作。

**验收标准:**
- 可以通过项目名称搜索
- 搜索结果实时显示
- 搜索响应时间 < 100ms

#### US-002: 查看项目 Git 状态
> 作为一名开发者，我希望能够一眼看到项目的 Git 状态，以便知道哪些项目需要提交或推送。

**验收标准:**
- 项目卡片显示修改状态
- 显示当前分支名称
- 有未提交修改时有明显标识

#### US-003: 一键打开项目
> 作为一名开发者，我希望能够一键在编辑器中打开项目，以便快速进入开发状态。

**验收标准:**
- 点击按钮即可打开编辑器
- 支持配置多个编辑器
- 支持设置默认编辑器

#### US-004: 管理多个远程仓库
> 作为一名开发者，我希望能够管理同一项目的多个远程仓库，以便同时推送到 GitHub 和 Gitee。

**验收标准:**
- 可以添加多个远程仓库
- 可以切换当前使用的远程
- 可以一键同步到其他远程

#### US-005: 查看编码活动统计
> 作为一名开发者，我希望能够看到我的编码活动统计，以便了解自己的工作习惯。

**验收标准:**
- 显示提交热力图
- 显示今日/本周提交数
- 数据自动聚合

### 3.2 典型使用场景

#### 场景一：早晨工作开始
1. 打开 CodeShelf
2. 查看仪表盘，了解待推送项目
3. 点击项目卡片，查看昨天的修改
4. 一键推送未推送的代码
5. 点击编辑器按钮，开始今天的工作

#### 场景二：寻找历史项目
1. 打开 CodeShelf
2. 在搜索框输入关键词
3. 从搜索结果中找到目标项目
4. 点击查看项目详情和提交历史
5. 一键在编辑器中打开

#### 场景三：多平台同步
1. 打开项目详情
2. 添加 Gitee 作为备用远程仓库
3. 验证远程仓库地址有效
4. 点击"同步到其他远程"
5. 选择同步所有分支
6. 完成多平台同步

#### 场景四：提交代码
1. 点击项目的"提交"按钮
2. 查看修改的文件列表
3. 选择要提交的文件（可取消已暂存文件）
4. 输入提交信息
5. 选择是否同时推送
6. 点击"提交并推送"

---

## 四、解决的问题

### 4.1 项目查找困难

**问题**: 项目散落在磁盘各处，找一个项目需要在文件管理器中反复翻找。

**解决方案**:
- 统一的项目书架视图，所有项目一目了然
- 实时搜索功能，输入关键词即刻定位
- 分类和标签系统，按类型组织项目
- 收藏置顶功能，常用项目触手可及

### 4.2 Git 状态不可见

**问题**: 不知道哪些项目有未提交的修改，哪些有未推送的代码，容易遗忘导致代码丢失。

**解决方案**:
- 项目卡片实时显示 Git 状态（有修改/无修改）
- 统计面板显示待推送项目数量
- 详情面板显示完整的修改文件列表和提交历史

### 4.3 操作繁琐

**问题**: 打开一个项目需要：找到目录 → 打开编辑器 → 打开终端 → 查看 Git 状态，步骤繁多。

**解决方案**:
- 项目卡片直接提供编辑器、终端、文件夹快捷按钮
- 一键打开，无需手动导航
- 详情面板集成所有快捷操作

### 4.4 多远程仓库管理混乱

**问题**: 同一项目可能推送到多个平台（GitHub + Gitee），管理和同步不便。

**解决方案**:
- 可视化管理多个远程仓库
- 切换当前远程，灵活选择推送目标
- 一键同步到其他远程仓库

### 4.5 编码活动无感知

**问题**: 不清楚自己的编码频率和习惯，缺乏激励和回顾。

**解决方案**:
- GitHub 风格的提交热力图，直观展示全年编码活动
- 实时统计今日/本周提交数量
- 自动聚合所有项目的提交数据

---

## 五、界面设计规范

### 5.1 布局结构

```
┌─────────────────────────────────────────────────────────┐
│  标题栏（可拖动、窗口控制）                                │
├─────────┬───────────────────────────────────────────────┤
│         │                                               │
│  侧边栏  │              主内容区                          │
│         │                                               │
│ - 仪表盘 │  ┌─────────────────────────────────────────┐  │
│ - 书架   │  │  工具栏（搜索、视图切换、操作按钮）        │  │
│ - 设置   │  ├─────────────────────────────────────────┤  │
│         │  │                                         │  │
│         │  │           内容展示区                     │  │
│         │  │                                         │  │
│         │  └─────────────────────────────────────────┘  │
│         │                                               │
├─────────┴───────────────────────────────────────────────┤
│  页脚（版本信息）                                         │
└─────────────────────────────────────────────────────────┘
```

---

## 六、技术架构

### 6.1 前端技术栈

| 技术 | 用途 |
|------|------|
| React 19 | UI 框架 |
| TypeScript | 类型安全 |
| Vite | 构建工具 |
| TailwindCSS v4 | 样式系统 |
| Zustand | 状态管理 |
| Lucide React | 图标库 |

### 6.2 后端技术栈

| 技术 | 用途 |
|------|------|
| Tauri 2.x | 桌面应用框架 |
| Rust | 后端逻辑 |
| SQLite | 本地数据存储 |

### 6.3 架构图

```
┌─────────────────────────────────────────────────────────┐
│                    用户界面 (React)                      │
├─────────────────────────────────────────────────────────┤
│                    状态管理 (Zustand)                    │
├─────────────────────────────────────────────────────────┤
│                   Tauri IPC Bridge                       │
├─────────────────────────────────────────────────────────┤
│                    后端服务 (Rust)                       │
│  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐    │
│  │ 项目管理 │  │ Git操作  │  │ 统计服务 │  │ 系统集成 │    │
│  └─────────┘  └─────────┘  └─────────┘  └─────────┘    │
├─────────────────────────────────────────────────────────┤
│  ┌─────────┐  ┌─────────┐  ┌─────────┐                 │
│  │ SQLite  │  │ Git CLI │  │ 文件系统 │                 │
│  └─────────┘  └─────────┘  └─────────┘                 │
└─────────────────────────────────────────────────────────┘
```

### 6.4 架构特点

- **跨平台**: 支持 Windows、macOS、Linux
- **轻量级**: 基于 Tauri，安装包小巧（约 10MB），资源占用低
- **本地优先**: 数据存储在本地，保护用户隐私
- **离线可用**: 核心功能无需网络连接
- **安全性**: Rust 内存安全，无 Node.js 依赖

---

## 七、非功能性需求

### 7.1 性能需求

| 指标 | 要求 |
|------|------|
| 启动时间 | < 2 秒 |
| 项目列表加载 | < 500ms (100 个项目) |
| 搜索响应 | < 100ms |
| Git 状态刷新 | < 1 秒 |
| 内存占用 | < 150MB |
| CPU 占用（空闲） | < 1% |

### 7.2 可靠性需求

| 指标 | 要求 |
|------|------|
| 数据持久化 | 本地 SQLite，支持备份恢复 |
| 错误处理 | 所有操作提供明确的错误提示 |
| 崩溃恢复 | 自动保存状态，重启后恢复 |

### 7.3 兼容性需求

| 平台 | 版本要求 |
|------|---------|
| Windows | Windows 10 及以上 |
| macOS | macOS 10.15 及以上 |
| Linux | 主流发行版 (Ubuntu 20.04+, Fedora 33+) |

### 7.4 安全性需求

- 不收集用户数据
- 不传输项目信息到外部服务器
- Git 凭证使用系统凭证管理器
- 远程仓库地址验证后才能添加

### 7.5 可维护性需求

- 代码遵循 TypeScript/Rust 最佳实践
- 组件化设计，便于扩展
- 日志记录关键操作
- 支持自动更新

---

## 九、术语表

| 术语 | 解释 |
|------|------|
| 书架 (Shelf) | 项目列表视图，展示所有已添加的项目 |
| 项目 (Project) | 一个本地 Git 仓库 |
| 远程 (Remote) | Git 远程仓库，如 GitHub、Gitee 上的仓库 |
| 当前远程 | 用户选择的当前操作目标远程仓库 |
| 备用远程 | 非当前使用的其他远程仓库 |
| 暂存 (Stage) | Git add 操作，将文件添加到暂存区 |
| 提交 (Commit) | Git commit 操作，创建一个提交 |
| 推送 (Push) | Git push 操作，将本地提交推送到远程 |
| 拉取 (Pull) | Git pull 操作，从远程获取并合并代码 |
| 热力图 | 以颜色深浅表示每日提交数量的可视化图表 |

---

## 十、版本规划

### v0.1（当前版本）
- [x] 项目书架基础功能
- [x] Git 状态监控和基础操作
- [x] 提交热力图统计
- [x] 主题切换
- [x] 编辑器/终端集成
- [x] 多远程仓库管理
- [x] 自动更新


### v1.0（远期规划）
- [ ] 插件系统
- [ ] 团队协作功能
- [ ] 云同步（可选）
- [ ] AI 辅助功能

---

## 十一、附录

### 11.1 参考资料

- [Tauri 官方文档](https://tauri.app)
- [React 官方文档](https://react.dev)
- [Git 官方文档](https://git-scm.com/doc)

### 11.2 修订历史

| 版本    | 日期                  | 修订内容 | 作者 |
|-------|---------------------|---------|------|
| 0.1.3 | 2026-01-29 | 初始版本 | - |

---
